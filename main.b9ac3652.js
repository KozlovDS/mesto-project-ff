(()=>{"use strict";function e(e,t,r,n,o){var c=function(e){return e.querySelector(".card").cloneNode(!0)}(t),a=c.querySelector(".card__image");return a.src=e.link,a.alt=e.name,c.querySelector(".card__title").textContent=e.name,c.querySelector(".card__delete-button").addEventListener("click",r),c.querySelector(".card__like-button").addEventListener("click",n),c.querySelector(".card__image").addEventListener("click",o),c}function t(e){e.target.closest(".card").classList.add("delete-card"),setTimeout((function(){e.target.closest(".card").remove()}),300)}function r(e){e.target.classList.toggle("card__like-button_is-active")}function n(e){e.classList.add("popup_is-opened"),e.addEventListener("mousedown",c),document.addEventListener("keydown",a)}function o(e){e.classList.remove("popup_is-opened"),e.removeEventListener("mousedown",c),document.removeEventListener("keydown",a)}function c(e){e.target.closest(".popup__content")&&!e.target.classList.contains("popup__close")||o(document.querySelector(".popup_is-opened"))}function a(e){"Escape"===e.key&&o(document.querySelector(".popup_is-opened"))}function s(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r.inputErrorClass),n.classList.remove(r.inputErrorClassActive),n.textContent=""}function i(e,t,r){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(r.inactiveButtonClass)):(t.disabled=!0,t.classList.add(r.inactiveButtonClass))}function u(e,t){var r=e.querySelector(t.inputSelector),n=e.querySelector(t.submitButtonSelector);s(e,r,t),n.disabled=!0,n.classList.add(t.inactiveButtonClass)}var l=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__add-button"),d=document.querySelector(".places__list"),_=document.querySelector("#card-template").content,m=document.querySelector(".profile__title"),v=document.querySelector(".profile__description"),y=document.querySelector(".popup_type_edit"),f=document.querySelector(".popup_type_new-card"),S=document.querySelector(".popup_type_image"),q=S.querySelector(".popup__image"),g=S.querySelector(".popup__caption"),k=y.querySelector(".popup__form"),L=f.querySelector(".popup__form"),E={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",inputErrorClassActive:"popup__input-error_active",errorClass:"popup__error_visible"};function C(e){if(!e.target.classList.contains("card__delete-button")){var t=e.target.closest(".places__item"),r=t.querySelector(".card__image"),o=t.querySelector(".card__title").textContent;q.src=r.src,q.alt=r.alt,g.textContent=o,n(S)}}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(n){d.append(e(n,_,t,r,C))})),l.addEventListener("click",(function(){u(k,E),n(y),k.name.value=m.textContent,k.description.value=v.textContent})),p.addEventListener("click",(function(){n(f)})),k.addEventListener("submit",(function(e){e.preventDefault(),m.textContent=e.target.name.value,v.textContent=e.target.description.value,o(e.target.closest(".popup"))})),L.addEventListener("submit",(function(n){n.preventDefault();var c={name:n.target["place-name"].value,link:n.target.link.value};d.prepend(e(c,_,t,r,C)),n.target.closest("form").reset(),o(n.target.closest(".popup")),u(L,E)})),function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){!function(e,t){var r=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);i(r,n,t),r.forEach((function(o){o.addEventListener("input",(function(){!function(e,t,r){t.validity.patternMismatch?t.setCustomValidity(t.dataset.validationError):t.setCustomValidity(""),t.validity.valid?s(e,t,r):function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n.inputErrorClass),o.classList.add(n.inputErrorClassActive),o.textContent=r}(e,t,t.validationMessage,r)}(e,o,t),i(r,n,t)}))}))}(t,e)}))}(E)})();